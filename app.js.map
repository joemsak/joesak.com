{"version":3,"sources":["app/main.js","node_modules/auto-reload-brunch/vendor/auto-reload.js"],"names":["document","addEventListener","indicateJSEnabled","initHomeGreeting","initDarkLightMode","initStickyHeader","initMobileMenu","NO_JS","selector","querySelectorAll","forEach","el","classList","remove","homeGreetingEl","querySelector","innerText","getGreeting","randomNum","Math","floor","random","timeGreeting","dayGreeting","hour","Date","getHours","MONDAY","weekdays","weekday","getDay","LIGHT","DARK","DARK_MODE","LIGHT_MODE","LOCAL_STORAGE_KEY","htmlEl","toggleDarkMode","contains","disableDarkMode","enableDarkMode","add","localStorage","setItem","prefersDarkMode","matchMedia","matches","getItem","getElementById","tracker","previousScroll","window","pageYOffset","isScrollingDown","setPreviousScroll","header","main","topBar","img","originalImgDistanceFromTop","getBoundingClientRect","top","originalTopBarHeight","offsetHeight","IMG_DIM_SMALL","IMG_DIM_LARGE","ghostElement","createElement","style","height","mainDistanceRatioIsPastLimit","setFixedTopBar","onscroll","setRelativeTopBar","mainDistanceFromTop","mainDistanceRatio","width","appendChild","mobileMenuBtn","mobileMenu","WebSocket","MozWebSocket","br","brunch","ar","disabled","_ar","cacheBuster","url","date","round","now","toString","replace","indexOf","browser","navigator","userAgent","toLowerCase","forceRepaint","reloaders","page","location","reload","stylesheet","slice","call","filter","link","val","getAttribute","href","setTimeout","body","javascript","scripts","textScripts","map","script","text","length","srcScripts","src","loaded","all","onLoad","eval","newScript","async","onload","head","port","host","server","hostname","connect","connection","onmessage","event","message","data","reloader","onerror","readyState","close","onclose"],"mappings":"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","file":"public/app.js","sourcesContent":["(() => {\n  document.addEventListener('DOMContentLoaded', () => {\n    indicateJSEnabled()\n    initHomeGreeting()\n    initDarkLightMode()\n    initStickyHeader()\n    initMobileMenu()\n  })\n\n  const indicateJSEnabled = () => {\n    const NO_JS = 'no-js'\n    const selector = `.${NO_JS}`\n\n    document.querySelectorAll(selector).forEach(el => el.classList.remove(NO_JS))\n  }\n\n  const initHomeGreeting = () => {\n    const homeGreetingEl = document.querySelector('#surprise')\n\n    if (homeGreetingEl)\n      homeGreetingEl.innerText = getGreeting()\n  }\n\n  const getGreeting = () => {\n    const randomNum = Math.floor(Math.random() * 100) % 2\n\n    return randomNum === 0 ?\n      `${timeGreeting()}.` :\n      `${dayGreeting()}.`\n  }\n\n  const timeGreeting = () => {\n    const hour = new Date().getHours()\n\n    if (hour > 4 && hour < 12) {\n      return \"Good morning\"\n    } else if (hour >= 12 && hour < 17) {\n      return \"Good afternoon\"\n    } else if (hour >= 17 && hour < 22) {\n      return \"Good evening\"\n    } else {\n      return \"I hope you're getting enough sleep\"\n    }\n  }\n\n  const dayGreeting = () => {\n    const MONDAY = \"Monday\"\n\n    const weekdays = [\n      \"Sunday\",\n      MONDAY,\n      \"Tuesday\",\n      \"Wednesday\",\n      \"Thursday\",\n      \"Friday\",\n      \"Saturday\",\n    ]\n\n    const weekday = weekdays[new Date().getDay()]\n\n    return `${weekday === MONDAY ? 'Welcome back to' : 'Happy'} ${weekday}`\n  }\n\n  const initDarkLightMode = () => {\n    const LIGHT = 'light'\n    const DARK = 'dark'\n\n    const DARK_MODE = `${DARK}-mode`\n    const LIGHT_MODE = `${LIGHT}-mode`\n\n    const LOCAL_STORAGE_KEY = 'prefersColorScheme'\n\n    const htmlEl = document.querySelector('html')\n\n    const toggleDarkMode = () => {\n      if (htmlEl.classList.contains(DARK_MODE)) {\n        disableDarkMode()\n      } else {\n        enableDarkMode()\n      }\n    }\n\n    const disableDarkMode = () => {\n      htmlEl.classList.remove(DARK_MODE)\n      htmlEl.classList.add(LIGHT_MODE)\n      localStorage.setItem(LOCAL_STORAGE_KEY, LIGHT)\n    }\n\n    const enableDarkMode = () => {\n      htmlEl.classList.add(DARK_MODE)\n      htmlEl.classList.remove(LIGHT_MODE)\n      localStorage.setItem(LOCAL_STORAGE_KEY, DARK)\n    }\n\n    const prefersDarkMode = () => {\n      if (matchMedia('(prefers-color-scheme: dark)').matches) {\n        return localStorage.getItem(LOCAL_STORAGE_KEY) != LIGHT\n      } else {\n        return localStorage.getItem(LOCAL_STORAGE_KEY) === DARK\n      }\n    }\n\n    document\n      .getElementById('dark-mode-toggle')\n      .addEventListener('click', toggleDarkMode)\n\n    if (prefersDarkMode()) {\n      htmlEl.classList.add(DARK_MODE)\n    } else {\n      htmlEl.classList.add(LIGHT_MODE)\n    }\n  }\n\n  const initStickyHeader = () => {\n    const tracker = {\n      previousScroll: window.pageYOffset,\n\n      isScrollingDown() {\n        return window.pageYOffset > this.previousScroll\n      },\n\n      setPreviousScroll() {\n        this.previousScroll = window.pageYOffset\n      },\n    }\n\n    const header = document.querySelector('header')\n    const main = document.querySelector('main')\n\n    const topBar = document.querySelector('#top-bar')\n    const img = document.querySelector('img')\n\n    const originalImgDistanceFromTop = img.getBoundingClientRect().top\n    const originalTopBarHeight = topBar.offsetHeight\n\n    const IMG_DIM_SMALL = 50\n    const IMG_DIM_LARGE = 200\n\n    const ghostElement = document.createElement('div')\n    ghostElement.style.height = `${originalTopBarHeight}px`\n\n    if (window.pageYOffset > 0 && mainDistanceRatioIsPastLimit())\n      setFixedTopBar()\n\n    window.onscroll = e => {\n      if (tracker.isScrollingDown() && mainDistanceRatioIsPastLimit()) {\n        setFixedTopBar()\n      } else {\n        tracker.setPreviousScroll()\n        setRelativeTopBar()\n      }\n    }\n\n    function mainDistanceRatioIsPastLimit() {\n      const mainDistanceFromTop = main.getBoundingClientRect().top\n      const mainDistanceRatio = mainDistanceFromTop / originalTopBarHeight\n      return mainDistanceRatio < 0.75\n    }\n\n    function setFixedTopBar() {\n      img.height = IMG_DIM_SMALL\n      img.width = IMG_DIM_SMALL\n      topBar.classList.add('fixedTop')\n      header.appendChild(ghostElement)\n    }\n\n    function setRelativeTopBar() {\n      img.height = IMG_DIM_LARGE\n      img.width = IMG_DIM_LARGE\n      topBar.classList.remove('fixedTop')\n      ghostElement.remove()\n    }\n  }\n\n  const initMobileMenu = () => {\n    const mobileMenuBtn = document.querySelector('#mobile-menu-btn')\n    const mobileMenu = document.querySelector('#mobile-menu')\n\n    mobileMenuBtn.addEventListener('click', e => {\n      if (mobileMenuBtn.classList.contains('open')) {\n        mobileMenuBtn.classList.remove('open')\n      } else {\n        mobileMenuBtn.classList.add('open')\n      }\n\n      if (mobileMenu.classList.contains('open')) {\n        mobileMenu.classList.remove('open')\n      } else {\n        mobileMenu.classList.add('open')\n      }\n    })\n  }\n})()\n","/* jshint ignore:start */\n(function() {\n  var WebSocket = window.WebSocket || window.MozWebSocket;\n  var br = window.brunch = (window.brunch || {});\n  var ar = br['auto-reload'] = (br['auto-reload'] || {});\n  if (!WebSocket || ar.disabled) return;\n  if (window._ar) return;\n  window._ar = true;\n\n  var cacheBuster = function(url){\n    var date = Math.round(Date.now() / 1000).toString();\n    url = url.replace(/(\\&|\\\\?)cacheBuster=\\d*/, '');\n    return url + (url.indexOf('?') >= 0 ? '&' : '?') +'cacheBuster=' + date;\n  };\n\n  var browser = navigator.userAgent.toLowerCase();\n  var forceRepaint = ar.forceRepaint || browser.indexOf('chrome') > -1;\n\n  var reloaders = {\n    page: function(){\n      window.location.reload(true);\n    },\n\n    stylesheet: function(){\n      [].slice\n        .call(document.querySelectorAll('link[rel=stylesheet]'))\n        .filter(function(link) {\n          var val = link.getAttribute('data-autoreload');\n          return link.href && val != 'false';\n        })\n        .forEach(function(link) {\n          link.href = cacheBuster(link.href);\n        });\n\n      // Hack to force page repaint after 25ms.\n      if (forceRepaint) setTimeout(function() { document.body.offsetHeight; }, 25);\n    },\n\n    javascript: function(){\n      var scripts = [].slice.call(document.querySelectorAll('script'));\n      var textScripts = scripts.map(function(script) { return script.text }).filter(function(text) { return text.length > 0 });\n      var srcScripts = scripts.filter(function(script) { return script.src });\n\n      var loaded = 0;\n      var all = srcScripts.length;\n      var onLoad = function() {\n        loaded = loaded + 1;\n        if (loaded === all) {\n          textScripts.forEach(function(script) { eval(script); });\n        }\n      }\n\n      srcScripts\n        .forEach(function(script) {\n          var src = script.src;\n          script.remove();\n          var newScript = document.createElement('script');\n          newScript.src = cacheBuster(src);\n          newScript.async = true;\n          newScript.onload = onLoad;\n          document.head.appendChild(newScript);\n        });\n    }\n  };\n  var port = ar.port || 9485;\n  var host = br.server || window.location.hostname || 'localhost';\n\n  var connect = function(){\n    var connection = new WebSocket('ws://' + host + ':' + port);\n    connection.onmessage = function(event){\n      if (ar.disabled) return;\n      var message = event.data;\n      var reloader = reloaders[message] || reloaders.page;\n      reloader();\n    };\n    connection.onerror = function(){\n      if (connection.readyState) connection.close();\n    };\n    connection.onclose = function(){\n      window.setTimeout(connect, 1000);\n    };\n  };\n  connect();\n})();\n/* jshint ignore:end */\n"]}